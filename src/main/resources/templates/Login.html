<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>로그인</title>
    <script src="https://kit.fontawesome.com/15f814a076.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        $(document).ready(() => {
            $("#submit").click(() => {
                var email = $("#userEmail").val();
                var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                var result = re.test(email);
                if(!result) {
                    alert('이메일이 아니에요');
                    return;
                }
                var password = $("#userPassword").val();
                var data = {
                    userEmail: email,
                    userPassword: password
                };
                alert(email);
                alert(password);
                $.ajax({
                    url: `http://52.78.173.234/user/login`,
                    type: 'POST',
                    data: JSON.stringify(data),
                    headers: {
                        "Content-Type": "application/json"
                    },
                    dataType: 'json',
                    success: function(result) {
                        alert(result.message);
                        location.href=`/index`;
                    }
                });
            });
        });
    </script>

<body>

    <div class="login-box">
        <h1>Login</h1>
        <br>
        <i class="far fa-user"></i>
        <input name="userEmail" id="userEmail">
        <i class="fas fa-lock"></i>
        <input type ="password" name="userPassword" id="userPassword">
        <br>
        <br>
    </div>
    <button id="submit">로그인하기</button>
    <br>
    <br>
    <input class="btn" type="button" name="" value="Create Account" onclick="location.href='/join'">

</body>
</head>
</html>