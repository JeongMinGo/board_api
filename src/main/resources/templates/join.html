<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>가입하기</title>
    <script src="https://kit.fontawesome.com/15f814a076.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        $(document).ready(() => {
            $("#submit").click(() => {
                var name= $("#userName").val();
                var email = $("#userEmail").val();
                var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                var result = re.test(email);
                if(!result) {
                    alert('이메일이 아니에요');
                    return;
                }
                var password = $("#userPassword").val();
                var data = {
                    userEmail: email,
                    userName: name,
                    userPassword: password
                };
                $.ajax({
                    url: `http://52.78.173.234/user`,
                    type: 'POST',
                    data: JSON.stringify(data),
                    headers: {
                        "Content-Type": "application/json"
                    },
                    dataType: 'json',
                    success: function(result) {
                        alert(result.message);
                        location.href=`/`;
                    }
                });
            });
        });


    </script>
<body>

<div class="login-box">
    <h1>Join</h1>
    <br>
    <input name="userName" id="userName">
    <input name="userEmail" id="userEmail">
    <input type="password" name="userPassword" id="userPassword">
    <button id="submit">가입하기</button>
    <br>
    <br>
    <a href="/">홈으로</a>
</div>
</body>
</head>
<body>
<form>

</form>
</body>
</html>